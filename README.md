# Micropython light alarm

New light hardware on ESP32/ Miropython and software for it.

boot.py - start initialization, SSID, password, MQTT-broker address

main.py - custom logic for control RGB light, main white light and alarm sireen by mqtt.

umqttsimple.py - some shit for MQTT functions, not to change. Found into Internet and used "as is".

Управляющая программа для "люстры" нового поколения. Пока обработка только RGB - канала устройства, на основе будет допилена прошивка для полного функционала.

Управляющий топик - RGB и RGB. Ответы в топике RGBASK. Ответ на пинг не реализован пока.

Формат фходной команды - JSON. Для RGB выглядит так:

{"RGB":"FF0000/3000/1000/00FF00/3000/2000/0000FF/3000/0/C"} цвет1 вр.1 вр.2 цвет2 вр.1 вр.2 цвет3 вр.1 вр2 последовательность Количество цветов в одной последвоательности произвольно.

Время 1 - время, сколько цвет находится "в статике" в миллисекундах. 0 не допускается. Для этого показателя допускается указание диапазона времени в милолсекундах через "-", например 100-1000 - это означает, что каждый раз время свечения выбираестя случайно в заданном диапазоне.

Время 2 - время "перехода" из одного цвета к следующему, меньще 1000 мс указывать не рекомендуется. Допустимо указывать 0 - мгновенная смена цвета.

Цвета обязательно указываются 6-значными 16-ричными значениями, скоращать нельзя.